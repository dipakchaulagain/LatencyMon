<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latency Monitor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>üåê Latency Monitor</h1>
            <div class="connection-status" id="connectionStatus">
                <span class="status-dot"></span>
                <span class="status-text">Connecting...</span>
            </div>
        </header>

        <div class="main-content">
            <!-- Current Status Card -->
            <div class="card status-card">
                <h2>Current Status</h2>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="status-label">Destination IP</div>
                        <div class="status-value" id="currentDestination">-</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Current Latency</div>
                        <div class="status-value latency-value" id="currentLatency">-</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Threshold</div>
                        <div class="status-value" id="currentThreshold">-</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Status</div>
                        <div class="status-value" id="currentStatus">
                            <span class="badge badge-info">Initializing</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuration Card -->
            <div class="card config-card">
                <div class="config-header">
                    <h2>Configuration</h2>
                    <button class="btn btn-toggle" id="toggleConfig">
                        <span id="toggleIcon">‚ñº</span> Hide
                    </button>
                </div>
                <div class="config-content" id="configContent">
                    <form id="configForm">
                        <div class="form-group">
                            <label for="destinationIp">Destination IP</label>
                            <input type="text" id="destinationIp" name="destination_ip" placeholder="8.8.8.8" required>
                        </div>
                        <div class="form-group">
                            <label for="thresholdMs">Latency Threshold (ms)</label>
                            <input type="number" id="thresholdMs" name="latency_threshold_ms" min="1" step="0.1"
                                placeholder="5" required>
                        </div>
                        <div class="form-group">
                            <label for="intervalSeconds">Ping Interval (seconds)</label>
                            <input type="number" id="intervalSeconds" name="ping_interval_seconds" min="0.1" step="0.1"
                                placeholder="1" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Update Configuration</button>
                    </form>
                </div>
            </div>

            <!-- Graph Card -->
            <div class="card graph-card">
                <h2>Latency Graph (Last 60 seconds)</h2>
                <div class="chart-container">
                    <canvas id="latencyChart"></canvas>
                </div>
            </div>

            <!-- Events Card -->
            <div class="card events-card">
                <div class="events-header">
                    <h2>Events Log</h2>
                    <button class="btn btn-small" id="refreshEvents">Refresh</button>
                </div>
                <div class="events-container" id="eventsContainer">
                    <div class="loading">Loading events...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>